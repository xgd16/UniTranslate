# uniTranslate

<img src="https://github.com/xgd16/UniTranslate/assets/42709773/3d879e22-fe2c-4238-aabb-39ab478fbd20" alt="UniTranslate" width="300" height="300">

[ä¸­æ–‡](./README.md) | [English](./README_EN.md)

# é¡¹ç›®ç®€ä»‹ ğŸ“’
è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªæ”¯æŒå¤šå¹³å°ç¿»è¯‘å’Œå°†ç¿»è¯‘ç»“æœå†™å…¥ Redis ç¼“å­˜çš„å·¥å…·ã€‚

## ä¾èµ–
`MySQL: 8.*` `redis`

å¯é€‰

`graylog`

## WEBç®¡ç†
[UniTranslate-web-console](https://github.com/xgd16/UniTranslate-web-console)

## åŠŸèƒ½ç‰¹ç‚¹ âœ¨
- æ”¯æŒç™¾åº¦ã€æœ‰é“ã€è°·æ­Œå’Œ Deepl è…¾è®¯ ChatGPT ç«å±± è®¯é£ PaPaGo å¹³å°çš„ç¿»è¯‘æ¥å…¥
- æ”¯æŒè®¾ç½®ç¿»è¯‘ API çš„ç­‰çº§ä¼˜å…ˆè°ƒç”¨é…ç½®çš„ä½ç­‰çº§ API
- åŒä¸€ä¸ª API æä¾›å•†å¯é…ç½®ä¸é™æ¬¡ å¯è®¾ç½®ä¸ºä¸åŒç­‰çº§
- åœ¨é…ç½®å¤šä¸ª API æ—¶å¦‚æœè°ƒç”¨å½“å‰ API å¤±è´¥è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª
- å¯ä»¥å°†ç¿»è¯‘è¿‡çš„å†…å®¹å†™å…¥ `Redis` `Memory` ç¼“å­˜é‡å¤ç¿»è¯‘å†…å®¹é™ä½ç¿»è¯‘ API é‡å¤è°ƒç”¨

## æ‰¹é‡ç¿»è¯‘æ”¯æŒæƒ…å†µ

|  å¹³å°   | æ˜¯å¦æ”¯æŒæ‰¹é‡ç¿»è¯‘ | æ˜¯å¦å®Œç¾æ”¯æŒ | å‡†ç¡®çš„æºè¯­è¨€ |                             å¤‡æ³¨                             |
| :-----: | :--------------: | :----------: | :----------: | :----------------------------------------------------------: |
|  ç™¾åº¦   |        æ˜¯        |      å¦      |      å¦      |            ä¸æ”¯æŒç²¾ç¡®è¿”å›å…·ä½“æ¯æ¡ç»“æœçš„æºè¯­è¨€ç±»å‹            |
| Google  |        æ˜¯        |      æ˜¯      |      æ˜¯      |                                                              |
|  æœ‰é“   |        æ˜¯        |      å¦      |      å¦      |                     æºè¯­è¨€ç±»å‹è¯†åˆ«ä¸å‡†ç¡®                     |
|  ç«å±±   |        æ˜¯        |      æ˜¯      |      æ˜¯      |                                                              |
|  Deepl  |        æ˜¯        |      å¦      |      å¦      |                     æºè¯­è¨€ç±»å‹è¯†åˆ«ä¸å‡†ç¡®                     |
|  è®¯é£   |        æ˜¯        |      å¦      |      å¦      | å®˜æ–¹ä¸æ”¯æŒæ‰¹é‡ç¿»è¯‘é€šè¿‡ç‰¹æ®Šå­—ç¬¦ â„– åˆ‡å‰²å®ç° ä¸” å¯èƒ½å‡ºç°ç»“æœéå¤šæ¡ |
| PaPaGo  |        æ˜¯        |      å¦      |      å¦      |         åŸºäº \n åˆ‡å‰²å®ç° ä¸”ä¸å¯è¯†åˆ«ä¸åŒçš„æºè¯­è¨€ç±»å‹          |
| ChatGPT |        æ˜¯        |      æ˜¯      |      æ˜¯      |                                                              |

## æœªæ¥æ”¯æŒ (ä¼˜å…ˆçº§æŒ‰ç…§é¡ºåº,æ‰“å‹¾ä¸ºå·²å®ç°) âœˆï¸
- [x] æŒä¹…åŒ–å·²ç¿»è¯‘åˆ° `MySQL`
- [x] web æ§åˆ¶é¡µé¢
- [x] ChatGPT AIç¿»è¯‘
- [x] è®¯é£ç¿»è¯‘
- [x] æ›´åˆç†å®‰å…¨çš„èº«ä»½éªŒè¯
- [x] è…¾è®¯ç¿»è¯‘
- [x] ç«å±±ç¿»è¯‘
- [x] PaPaGo
- [x] æ”¯æŒæ›´å¤šå›½å®¶è¯­è¨€
- [x] æ”¯æŒæ¨¡æ‹Ÿ `LibreTranslate` ç¿»è¯‘æ¥å£
- [x] æ”¯æŒç»ˆç«¯äº¤äº’ç¿»è¯‘
- [ ] å®¢æˆ·ç«¯æ›´å¤šç¿»è¯‘åŠŸèƒ½æ”¯æŒ

## åŸºç¡€ç±»å‹ ğŸª¨
`YouDao` `Baidu` `Google` `Deepl` `ChatGPT` `XunFei` `XunFeiNiu` `Tencent` `HuoShan` `PaPaGo`

## Docker å¯åŠ¨ ğŸš€
```shell
# é¡¹ç›®ç›®å½•ä¸‹
docker build -t uni-translate:latest .
# ç„¶åæ‰§è¡Œ (æœ€å¥½åˆ›å»ºä¸€ä¸ª network å°† mysql å’Œ redis æ”¾åœ¨åŒä¸€ä¸ªä¸‹ ç„¶åé…ç½®é‡Œç›´æ¥ç”¨å®¹å™¨åå­—è®¿é—®åº”ç”¨å³å¯)
docker run -d --name uniTranslate -v {æœ¬æœºç›®å½•}/config.yaml:/app/config.yaml -p 9431:{ä½ åœ¨config.yamlä¸­é…ç½®çš„port} --network baseRun uni-translate:latest
```

## ç»ˆç«¯äº¤äº’æ–¹å¼
åœ¨ `config.yaml` é…ç½®å®Œæˆåæ‰§è¡Œ

```bash
./UniTranslate translate auto en
```

## é…ç½®è§£æ ğŸ—„ï¸

```yaml
server:
  name: uniTranslate
  address: "0.0.0.0:9431"
  cacheMode: redis # redis , mem , off æ¨¡å¼ mem ä¼šå°†ç¿»è¯‘ç»“æœå­˜å‚¨åˆ°ç¨‹åºå†…å­˜ä¸­ æ¨¡å¼ off ä¸å†™å…¥ä»»ä½•ç¼“å­˜
  cachePlatform: false # æ‰§è¡Œç¼“å­˜keyç”Ÿæˆæ˜¯å¦åŒ…å«å¹³å° (ä¼šå½±å“é¡¹ç›®å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–å­˜å‚¨çš„key)
  key: "hdasdhasdhsahdkasjfsoufoqjoje" # http api å¯¹æ¥æ—¶çš„å¯†é’¥
  keyMode: 1 # æ¨¡å¼ 1 ç›´æ¥ä¼ å…¥ key åšéªŒè¯ æ¨¡å¼ 2 ä½¿ç”¨ key åŠ å¯†åŠ ç­¾æ•°æ®è¿›è¡ŒéªŒè¯
```

## API æ–‡æ¡£ ğŸŒ
[åœ¨çº¿æ–‡æ¡£](https://apifox.com/apidoc/shared-335b66b6-90dd-42af-8a1b-f7d1a2c3f351)
[Open Api File](./uniTranslate%20(ç»Ÿä¸€ç¿»è¯‘).openapi.json)

## æ¥å£èº«ä»½éªŒè¯ ts ç¤ºä¾‹
```typescript
import { MD5 } from "crypto-js";

/**
 * 
 * @param key å¹³å°è®¾ç½®çš„key
 * @param params è¯·æ±‚å‚æ•°
 * @return ç”Ÿæˆçš„èº«ä»½éªŒè¯ç 
 */
function AuthEncrypt(key: string, params: { [key: string]: any }): string {
  return MD5(key + sortMapToStr(params)).toString();
}


const sortMapToStr = (map: { [key: string]: any }): string => {
  let mapArr = new Array();
  for (const key in map) {
    const item = map[key];
    if (Array.isArray(item)) {
      mapArr.push(`${key}:${item.join(",")}`);
      continue;
    }
    if (typeof item === "object") {
      mapArr.push(`${key}:|${sortMapToStr(item)}|`);
      continue;
    }
    mapArr.push(`${key}:${item}`);
  }

  return mapArr.sort().join("&");
};

const params: { [key: string]: any } = {
    c: {
        cc: 1,
        cb: 2,
        ca: 3,
        cd: 4,
    },
    a: 1,
    b: [4, 1, 2],
};

console.log(AuthEncrypt("123456", params));
```

è¯·æ±‚ç¤ºä¾‹

```shell
curl --location --request POST 'http://127.0.0.1:9431/api/translate' \
--header 'auth_key: xxxxxxxxx{AuthEncryptå‡½æ•°ç»“æœæ”¾åœ¨æ­¤å¤„}' \
--header 'User-Agent: Apifox/1.0.0 (https://apifox.com)' \
--header 'Content-Type: application/json' \
--data '{
    "from": "auto",
    "to": "en",
    "text": "æµ‹è¯•ä¸€ä¸‹",
    "platform": "YouDao"
}'
```


## ç¿»è¯‘çš„å†…å®¹ä¸æ”¯æŒ??? ğŸ¤”
æœ¬ç¨‹åºæ‰€æœ‰æ”¯æŒçš„è¯­è¨€æ ¹æ® [translate.json](./translate.json) æ–‡ä»¶è¿›è¡Œå›½å®¶è¯­è¨€**æ ‡è¯†**ç»Ÿä¸€ä½¿ç”¨ _æœ‰é“_ ç¿»è¯‘ API æ ‡è¯†ç¬¦ä½œä¸ºåŸºå‡†

è¯·æ ¹æ® _æœ‰é“_ ç¿»è¯‘ API æ–‡æ¡£æ”¯æŒçš„æ ‡è¯†ä½œä¸ºåŸºå‡†ä¿®æ”¹ `translate.json` æ–‡ä»¶

## æ„Ÿè°¢ [Jetbrains](https://www.jetbrains.com/?from=UniTranslate) æä¾›å…è´¹çš„ IDE
